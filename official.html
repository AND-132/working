<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Official Archive â€” 32â€™s Documentation</title>
  <meta name="description" content="ë°•ìƒí¬ ê³µì‹ ì—…ë¬´ ì•„ì¹´ì´ë¸Œ (2020â€“2025) â€” GitHub Pages" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --primary:#0A2740;
      --accent:#3A7DFF;
      --bg:#F9FAFB;
      --card:#FFFFFF;
      --text:#111827;
      --muted:#6B7280;
      --ring:rgba(58,125,255,0.25);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Pretendard', sans-serif;
      color:var(--text); background:linear-gradient(180deg, #FFFFFF 0%, var(--bg) 100%);
    }
    .container{max-width:1100px; margin:0 auto; padding:24px}
    .card{
      background:var(--card);
      border:1px solid #E5E7EB;
      border-radius:18px;
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:10px;
      transition:transform .15s ease, box-shadow .15s ease;
      height:100%;
    }
    .card:hover{transform:translateY(-2px); box-shadow:0 12px 24px rgba(0,0,0,.06)}
    header{
      position:sticky; top:0; z-index:10; backdrop-filter:saturate(1.1) blur(8px);
      background:rgba(255,255,255,.85); border-bottom:1px solid #E5E7EB;
    }
    .nav{display:flex; align-items:center; justify-content:space-between; gap:16px; height:64px}
    .brand{display:flex; align-items:center; gap:10px; text-decoration:none; color:inherit}
    .logo{width:34px; height:34px; display:grid; place-items:center; border-radius:12px; background:linear-gradient(135deg,var(--primary),var(--accent)); box-shadow:0 6px 20px rgba(0,0,0,.08)}
    .links{display:flex; gap:14px; align-items:center}
    .pill{padding:10px 14px; border-radius:999px; border:1px solid #E5E7EB; background:#fff}
    .btn{padding:10px 14px; border-radius:12px; border:1px solid var(--accent); background:var(--accent); color:#fff; font-weight:600}
    .hero{display:grid; gap:18px; align-items:center; grid-template-columns:1.2fr .8fr; padding:48px 0}
    .hero-card{background:var(--card); border:1px solid #E5E7EB; border-radius:20px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,.05)}
    .grid{display:grid; grid-template-columns:repeat(3,1fr); gap:16px; margin-top:8px}
    .tms-card{
      background:var(--card); border:1px solid #E5E7EB; border-radius:16px; padding:18px; text-align:center;
      box-shadow:0 6px 12px rgba(0,0,0,.04); transition:.2s;
    }
    .tms-card:hover{transform:translateY(-3px); box-shadow:0 10px 20px rgba(0,0,0,.07);}
    .open-btn{
      background:var(--accent); color:white; border:none; border-radius:8px; padding:8px 14px; cursor:pointer; margin-top:8px;
    }
    footer{padding:40px 0; color:var(--muted); font-size:14px; text-align:center}
  </style>
</head>

<body>
  <header>
    <div class="container nav">
      <a class="brand" href="./">
        <div class="logo">ğŸ“˜</div>
        <span>Official Archive</span>
      </a>
      <nav class="links">
        <a class="pill" href="#tms">TMS</a>
        <a class="pill" href="#archives">Archives</a>
        <a class="pill" href="#about">About</a>
        <a class="btn" id="authBtn" href="./login.html">ë¡œê·¸ì¸ / íšŒì›ê°€ì…</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div>
        <h1>ê³µì‹ ì•„ì¹´ì´ë¸Œ (2020â€“2025)</h1>
        <p class="sub">ì¸ì¦Â·ì‹¬ì‚¬Â·í‰ê°€ ëŒ€ë¹„ìš© í–‰ì • ì•„ì¹´ì´ë¸Œ. HRD-Net/NCS ë¬¸ì„œ, í‰ê°€ì„œ, ì¦ë¹™ìë£Œë¥¼ ì²´ê³„ì ìœ¼ë¡œ ë³´ê´€í•©ë‹ˆë‹¤.</p>
        <div style="display:flex; gap:10px; margin-top:16px; flex-wrap:wrap">
          <a class="btn" href="#quick-start">ë¹ ë¥¸ ì‹œì‘</a>
          <a class="pill" href="./official.html">ìƒˆë¡œê³ ì¹¨</a>
        </div>
      </div>
      <div class="hero-card">
        <strong>ì—…ë¬´ìš© ë°”ë¡œê°€ê¸°</strong>
        <ul style="margin:10px 0 0 0; padding-left:18px; line-height:1.7">
          <li><a href="#tms">TMS ëª¨ë“ˆ</a></li>
          <li><a href="#archives">ì—°ë„ë³„ ì•„ì¹´ì´ë¸Œ</a></li>
          <li><a href="./login.html">ë¡œê·¸ì¸Â·íšŒì›ê°€ì…</a></li>
        </ul>
      </div>
    </section>

    <!-- ğŸ”¥ Firebase Storage í´ë” ì¹´ë“œ í‘œì‹œ -->
    <section class="archive-section">
      <h2>ì—°ë„ë³„ ì•„ì¹´ì´ë¸Œ (Firebase Storage ì—°ë™)</h2>
      <div id="official-grid" class="grid"></div>
    </section>

    <footer>
      <p>Â© <span id="y"></span> ë°•ìƒí¬ â€¢ Official Archive â€¢ Built with GitHub Pages</p>
    </footer>
  </main>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
  </script>

  <!-- âœ… Firebase Storage ì—°ë™ -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getStorage, ref, listAll, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBFHz2dP8iucRWl7KHvyv6I2HlRqHLDjkw",
      authDomain: "and-132-archive.firebaseapp.com",
      projectId: "and-132-archive",
      storageBucket: "and-132-archive.appspot.com",
      messagingSenderId: "650954051303",
      appId: "1:650954051303:web:9ebe30987a0dbaf0451c42"
    };

    const app = initializeApp(firebaseConfig);
    const storage = getStorage(app);
    const container = document.getElementById("official-grid");

    async function loadOfficialFolders() {
      const baseRef = ref(storage, "official");
      const res = await listAll(baseRef);

      if (res.prefixes.length === 0 && res.items.length === 0) {
        container.innerHTML = "<p>ì•„ì§ ì—…ë¡œë“œëœ í´ë”ë‚˜ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>";
        return;
      }

      for (const folder of res.prefixes) {
        const card = document.createElement("div");
        card.className = "tms-card";

        const title = document.createElement("h3");
        title.innerText = folder.name;

        const button = document.createElement("button");
        button.className = "open-btn";
        button.innerText = "ì—´ê¸°";
        button.onclick = () => openFolder(folder.fullPath);

        card.appendChild(title);
        card.appendChild(button);
        container.appendChild(card);
      }

      // í´ë” ì—†ì´ íŒŒì¼ë§Œ ìˆì„ ë•Œ ì²˜ë¦¬
      for (const file of res.items) {
        const url = await getDownloadURL(file);
        const card = document.createElement("div");
        card.className = "tms-card";
        card.innerHTML = `<h3>${file.name}</h3><a class="open-btn" href="${url}" target="_blank">ë‹¤ìš´ë¡œë“œ</a>`;
        container.appendChild(card);
      }
    }

    async function openFolder(path) {
      const folderRef = ref(storage, path);
      const res = await listAll(folderRef);
      let list = "";
      for (const item of res.items) {
        const url = await getDownloadURL(item);
        list += `<li><a href="${url}" target="_blank">${item.name}</a></li>`;
      }
      const win = window.open("", "_blank");
      win.document.write(`<h2>${path}</h2><ul>${list}</ul>`);
    }

    loadOfficialFolders();
  </script>
</body>
</html>
