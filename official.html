<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Official Archive â€” 32â€™s Documentation</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary:#0A2740;
      --accent:#3A7DFF;
      --bg:#F9FAFB;
      --card:#FFFFFF;
      --text:#111827;
      --muted:#6B7280;
    }

    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:'Pretendard',sans-serif;
      background:linear-gradient(180deg,#ffffff 0%,var(--bg) 100%);
      color:var(--text);
    }

    /* HEADER */
    header{
      position:sticky;top:0;z-index:10;
      background:rgba(255,255,255,.85);
      backdrop-filter:saturate(1.1) blur(8px);
      border-bottom:1px solid #E5E7EB;
    }
    .nav{max-width:1100px;margin:0 auto;padding:16px 24px;display:flex;align-items:center;justify-content:space-between;}
    .brand{display:flex;align-items:center;gap:12px;text-decoration:none;color:var(--text);}
    .logo{width:34px;height:34px;border-radius:12px;background:linear-gradient(135deg,var(--primary),var(--accent));display:grid;place-items:center;color:white;font-size:18px;}
    #authBtn{padding:10px 14px;border-radius:12px;background:var(--accent);color:white;text-decoration:none;font-weight:600;}

    /* LAYOUT */
    main{max-width:1100px;margin:0 auto;padding:32px 24px;}
    h1{font-size:30px;margin:0 0 6px;}
    .sub{color:var(--muted);font-size:14px;}

    /* HERO */
    .hero{
      margin-top:40px;
      display:grid;grid-template-columns:1.2fr .8fr;gap:24px;
    }
    .hero-card{
      background:var(--card);
      border:1px solid #E5E7EB;
      border-radius:20px;
      padding:20px;
      box-shadow:0 8px 24px rgba(0,0,0,.05);
    }

    /* GRID & CARD */
    .section-title{margin-top:48px;font-size:22px;font-weight:600;}
    .grid, #official-grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:16px;
      margin-top:16px;
    }
    .card{
      background:var(--card);
      border:1px solid #E5E7EB;
      border-radius:18px;
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:10px;
      transition:transform .15s ease, box-shadow .15s ease;
      height:100%;
    }
    .card:hover{transform:translateY(-3px);box-shadow:0 12px 24px rgba(0,0,0,.06);}
    .btn{
      margin-top:auto;
      padding:10px 14px;
      border-radius:12px;
      background:var(--accent);
      color:#fff;
      text-align:center;
      text-decoration:none;
      font-weight:600;
    }

  </style>
</head>

<body>

  <header>
    <div class="nav">
      <a class="brand" href="./">
        <div class="logo">ğŸ“˜</div>
        <span>Official Archive</span>
      </a>
      <a id="authBtn" href="./login.html">ë¡œê·¸ì¸ / íšŒì›ê°€ì…</a>
    </div>
  </header>

  <main>

    <!-- HERO -->
    <section class="hero">
      <div>
        <h1>ê³µì‹ ì•„ì¹´ì´ë¸Œ (2020â€“2025)</h1>
        <p class="sub">ê¸°ê´€ ì¸ì¦ / ì‹¬ì‚¬ ëŒ€ë¹„ / í‰ê°€ìë£Œ ì •ë¦¬</p>
      </div>
      <div class="hero-card">
        <strong>ì—…ë¬´ìš© ë°”ë¡œê°€ê¸°</strong>
        <ul style="margin:12px 0 0;padding-left:20px;line-height:1.7;">
          <li>TMS ëª¨ë“ˆ</li>
          <li>ì—°ë„ë³„ ì•„ì¹´ì´ë¸Œ</li>
          <li>í‰ê°€ ìš´ì˜ íŒ¨í‚¤ì§€</li>
        </ul>
      </div>
    </section>

    <!-- TMS -->
    <h2 class="section-title">TMS ëª¨ë“ˆ</h2>
    <div class="grid">

      <div class="card">
        <h3>ì¸ì¦Â·ì‹¬ì‚¬ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
        <p>ê¸°ê´€ ì¸ì¦ ë° ê³¼ì • ì‹¬ì‚¬ ëŒ€ë¹„ ë¬¸ì„œ ëª¨ìŒ</p>
        <a class="btn" href="list.html?path=official/isuja">ì—´ê¸°</a>
      </div>

      <div class="card">
        <h3>í‰ê°€ ìš´ì˜ íŒ¨í‚¤ì§€</h3>
        <p>í‰ê°€ì¼ì§€ / ê°ë…ì ì²´í¬ / ì´ì˜ì‹ ì²­</p>
        <a class="btn" href="list.html?path=official/ìš´ì˜íŒ¨í‚¤ì§€">ì—´ê¸°</a>
      </div>

      <div class="card">
        <h3>í›ˆë ¨ê³¼ì • ê´€ë¦¬</h3>
        <p>ìš´ì˜ / ì¶œê²° / êµê³¼ / ì‹¤ìŠµ</p>
        <a class="btn" href="list.html?path=official/í›ˆë ¨ê³¼ì •ê´€ë¦¬">ì—´ê¸°</a>
      </div>

    </div>

    <!-- FIXED YEAR ARCHIVE -->
    <h2 class="section-title">ì—°ë„ë³„ ì•„ì¹´ì´ë¸Œ</h2>
    <div class="grid">

      <div class="card">
        <h3>01_í›ˆë ¨ìš´ì˜</h3>
        <p>í›ˆë ¨ìš´ì˜ ì¦ë¹™ & ë³´ê³ ìë£Œ</p>
        <a class="btn" href="list.html?path=official/01_í›ˆë ¨ìš´ì˜">ì—´ê¸°</a>
      </div>

      <div class="card">
        <h3>2022â€“2023</h3>
        <p>ì‹¬ì‚¬ ëŒ€ì‘ ë¬¸ì„œ / ìš´ì˜ ë³€í™” ê¸°ë¡</p>
        <a class="btn" href="list.html?path=official/2022-2023">ì—´ê¸°</a>
      </div>

      <div class="card">
        <h3>2024â€“2025</h3>
        <p>í†µí•©ì‹¬ì‚¬ ëŒ€ì‘ìë£Œ ëª¨ìŒ</p>
        <a class="btn" href="list.html?path=official/2024-2025">ì—´ê¸°</a>
      </div>

    </div>

    <!-- ğŸ”¥ HERE: Firebase folder auto sync -->
    <h2 class="section-title">ì—°ê²°ëœ ê³µì‹ ìë£Œ (Firebase)</h2>
    <div id="official-grid"></div>

  </main>


<script type="module">
  import { auth } from './firebase-init.js';
  import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

  const authBtn = document.getElementById('authBtn');

  onAuthStateChanged(auth, (user) => {
    if (user) {
      authBtn.textContent = "ë¡œê·¸ì•„ì›ƒ";
      authBtn.href = "#";
      authBtn.onclick = async () => { await signOut(auth); location.reload(); };
    } else {
      authBtn.textContent = "ë¡œê·¸ì¸ / íšŒì›ê°€ì…";
      authBtn.href = "./login.html";
    }
  });
</script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getStorage, ref, listAll, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBFHz2dP8iucRWl7KHvyv6I2HlRqHLDjkw",
    authDomain: "and-132-archive.firebaseapp.com",
    projectId: "and-132-archive",
    storageBucket: "and-132-archive.appspot.com",
    messagingSenderId: "650954051303",
    appId: "1:650954051303:web:9ebe30987a0dbaf0451c42"
  };

  const app = initializeApp(firebaseConfig);
  const storage = getStorage(app);
  const container = document.getElementById("official-grid");

  async function loadOfficialFolders() {
    const baseRef = ref(storage, "official");
    const res = await listAll(baseRef);

    res.prefixes.forEach(folder => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <h3>${folder.name}</h3>
        <p>ì €ì¥ë¨ Â· Firebase Storage</p>
        <a class="btn" href="list.html?path=${folder.fullPath}">ì—´ê¸°</a>
      `;
      container.appendChild(card);
    });
  }
  loadOfficialFolders();
</script>

<script type="module" src="./storage-eval.js"></script>

</body>
</html>
